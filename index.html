<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dart Lane Access</title>

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin-top: 60px;
}
input, button {
  font-size: 22px;
  padding: 10px;
  margin: 6px;
}
#staff {
  display: none;
  margin-top: 20px;
  border-top: 2px solid #ccc;
  padding-top: 20px;
}
.hidden {
  opacity: 0.1;
}
</style>
</head>

<body>

<h1 id="status"></h1>

<input type="password" id="code" placeholder="Enter Code"><br>
<button onclick="start()">Start Game</button>

<br><br>
<button class="hidden" onclick="showStaff()">Staff</button>

<div id="staff">
  <h2>Staff Control</h2>
  <input type="password" id="pin" placeholder="Staff PIN"><br>
  <input type="text" id="newcode" placeholder="New Code"><br><br>
  <button onclick="setTime(30)">30 Min</button>
  <button onclick="setTime(60)">60 Min</button>
  <button onclick="setTime(90)">90 Min</button><br><br>
  <button onclick="resetLane()">Activate Lane</button>
</div>

<script>
// ===== SETTINGS =====
const LANE = "Lane 1";
const STAFF_PIN = "4728";

// League schedule (Thursday 6–10 PM)
const LEAGUE_DAY = 1;      // 0=Sun ... 4=Thu
const START_HOUR = 18;    // 6 PM
const END_HOUR = 22;      // 10 PM

if(!localStorage.code) localStorage.code = "1234";
if(!localStorage.time) localStorage.time = 60;

const now = new Date();
const status = document.getElementById("status");

if(now.getDay() === LEAGUE_DAY && now.getHours() >= START_HOUR && now.getHours() < END_HOUR){
  status.innerText = LANE + " – Enter Code";
} else {
  status.innerText = LANE + " – League Only Thu 6–10 PM";
}

function start(){
  const now = new Date();
  if(now.getDay() !== LEAGUE_DAY || now.getHours() < START_HOUR || now.getHours() >= END_HOUR){
    alert("League play only Thu 6–10 PM");
    return;
  }

  if(document.getElementById("code").value === localStorage.code){
    localStorage.code = "USED";
    alert("Game started for " + localStorage.time + " minutes");
    setTimeout(() => location.reload(), localStorage.time * 60000);
  } else {
    alert("Invalid or used code");
  }
}

function showStaff(){
  document.getElementById("staff").style.display = "block";
}

function setTime(t){
  localStorage.time = t;
  alert(t + " minutes selected");
}

function resetLane(){
  if(document.getElementById("pin").value !== STAFF_PIN){
    alert("Wrong PIN");
    return;
  }
  localStorage.code = document.getElementById("newcode").value;
  alert("Lane activated");
  location.reload();
}
</script>

</body>
</html>
