
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lane Passcode</title>

<style>
body {
  margin:0;
  height:100vh;
  background: radial-gradient(circle at center, #121212 0%, #1e1e1e 100%);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Segoe UI', sans-serif;
  color:white;
  overflow:hidden;
}

.container { text-align:center; }

h1 {
  margin-bottom:30px;
  font-size:2.5em;
  letter-spacing:1px;
  color:#00ffd0;
  text-shadow:0 0 10px #00ffd0, 0 0 20px #00ffd0;
}

.display {
  font-size:2.5em;
  letter-spacing:15px;
  margin-bottom:30px;
  height:60px;
}

.message {
  height:30px;
  font-size:1.2em;
  margin-top:10px;
}

.keypad {
  display:grid;
  grid-template-columns:repeat(3, 100px);
  gap:20px;
  justify-content:center;
}

.key {
  width:100px;
  height:100px;
  background:#222;
  border-radius:20px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:2em;
  color:#00ffd0;
  box-shadow:0 0 10px #00ffd0;

  user-select:none;
  -webkit-user-select:none;
  -webkit-tap-highlight-color:transparent;
}

.key.pressed {
  transform:scale(0.92);
  box-shadow:0 0 20px #00ffd0;
  background:#111;
}

.key.clear { color:#ff4c4c; box-shadow:0 0 10px #ff4c4c; }
.key.submit { color:#4cff4c; box-shadow:0 0 10px #4cff4c; }
</style>
</head>

<body>
<div class="container">
  <h1>Enter Lane Passcode</h1>
  <div class="display" id="display">●●●●</div>

  <div class="keypad">
    <div class="key" data-num="1">1</div>
    <div class="key" data-num="2">2</div>
    <div class="key" data-num="3">3</div>
    <div class="key" data-num="4">4</div>
    <div class="key" data-num="5">5</div>
    <div class="key" data-num="6">6</div>
    <div class="key" data-num="7">7</div>
    <div class="key" data-num="8">8</div>
    <div class="key" data-num="9">9</div>
    <div class="key clear" data-action="clear">C</div>
    <div class="key" data-num="0">0</div>
    <div class="key submit" data-action="submit">✔</div>
  </div>

  <div class="message" id="message"></div>
</div>

<script>
const PASSCODE = "1234";
const GRANDARTS_PACKAGE = "jp.luxza.GranDarts";

let input = "";

const display = document.getElementById("display");
const message = document.getElementById("message");

document.querySelectorAll(".key").forEach(key => {
  key.addEventListener("touchstart", e => handleKey(e, key), { passive:false });
  key.addEventListener("click", e => handleKey(e, key));
});

function handleKey(e, key) {
  e.preventDefault();

  key.classList.add("pressed");
  setTimeout(() => key.classList.remove("pressed"), 120);

  if (key.dataset.num !== undefined) {
    if (input.length < 4) input += key.dataset.num;
    updateDisplay();
    return;
  }

  if (key.dataset.action === "clear") {
    input = "";
    updateDisplay();
    message.textContent = "";
    return;
  }

  if (key.dataset.action === "submit") {
    submitCode();
  }
}

function updateDisplay() {
  display.textContent =
    "●".repeat(input.length) + "●".repeat(4 - input.length);
}

function submitCode() {
  if (input === PASSCODE) {
    message.textContent = "Access Granted";
    message.style.color = "#4cff4c";

    setTimeout(() => {
      if (if (window.fully && fully.startApplication) {
  fully.startApplication(GRANDARTS_PACKAGE);
} else if (window.location.href.startsWith("http")) {
  // Android intent fallback
  window.location.href = "intent://#Intent;package=jp.luxza.GranDarts;end";
}
);
      } else {
        alert("Fully Kiosk not detected.\nOpen this page INSIDE Fully Kiosk.");
      }
    }, 400);

  } else {
    message.textContent = "Incorrect Passcode";
    message.style.color = "#ff4c4c";
    input = "";
    updateDisplay();
  }
}
</script>
</body>
</html>
